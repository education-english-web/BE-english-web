package imageutil

import (
	"errors"
	"image"
	"testing"
)

func Test_ExtractFromImage(t *testing.T) {
	type args struct {
		base64 string
	}

	tests := []struct {
		name    string
		args    args
		wantErr error
		wantExt string
	}{
		{
			name: "cannot decode base64 image",
			args: args{
				base64: "1,blabla",
			},
			wantErr: errors.New("illegal base64 data at input byte 4"),
			wantExt: "",
		},
		{
			name: "cannot get image configure",
			args: args{
				base64: "data:image/jpg;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iMTE0MS4wMDAwMDBwdCIgaGVpZ2h0PSI2NzEuMDAwMDAwcHQiIHZpZXdCb3g9IjAgMCAxMTQxLjAwMDAwMCA2NzEuMDAwMDAwIgogcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCI+CjxtZXRhZGF0YT4KQ3JlYXRlZCBieSBwb3RyYWNlIDEuMTYsIHdyaXR0ZW4gYnkgUGV0ZXIgU2VsaW5nZXIgMjAwMS0yMDE5CjwvbWV0YWRhdGE+CjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLDY3MS4wMDAwMDApIHNjYWxlKDAuMTAwMDAwLC0wLjEwMDAwMCkiCmZpbGw9IiMwMDAwMDAiIHN0cm9rZT0ibm9uZSI+CjxwYXRoIGQ9Ik04MjEgNjU1MyBjLTEgLTcgLTEyIC0xMyAtMjYgLTEzIC0yMSAwIC0yNSAtNSAtMjQgLTI3IDEgLTE3IDMgLTIxCjYgLTEwIDIgOSAxMSAxNyAxOSAxNyAxMiAwIDExIC04IC04IC00MSAtMTkgLTM1IC0yNCAtMzggLTI2IC0yMCAtMiAxMyAtMTEKMjEgLTI0IDIxIC0xNCAwIC0xOCA1IC0xNCAxNiAzIDkgNiAyMCA2IDI1IDAgNSA3IDkgMTUgOSA4IDAgMTUgNSAxNSAxMCAwIDYKLTEzIDEwIC0zMCAxMCAtMTYgMCAtMzAgLTQgLTMwIC0xMCAwIC01IDQgLTEwIDkgLTEwIDkgMCAzIC0zMCAtMTUgLTc0IC01Ci0xNCAtNCAtMTcgNCAtMTIgOCA1IDEyIC00IDEyIC0zMSAwIC0zMyAzIC0zOCAyNSAtMzkgMjEgLTIgMjUgMiAyNSAyNyAwIDE2CjUgMjkgMTAgMjkgNiAwIDEwIC0xNiAxMCAtMzYgMCAtMjkgMyAtMzUgMTYgLTMwIDkgMyAzNCA3IDU3IDcgMjMgMSAzMiA0IDIwCjYgLTI2IDUgLTMxIDIzIC04IDIzIDggMCAxNSA1IDE1IDEwIDAgNiAtNyAxMCAtMTUgMTAgLTIxIDAgLTE5IDE4IDMgMjMgMTYgNAoxNiA1IDAgNiAtMTAgMCAtMTggNiAtMTggMTEgMCA2IDggMTAgMTggMTEgMTMgMCAxNCAyIDIgNiAtOCA0IC0yMCAxMyAtMjcgMjIKLTExIDE0IC0xMiAxNCAtMTMgLTIgMCAtMTAgLTQgLTE2IC0xMCAtMTIgLTUgMyAtNyAxMiAtMyAyMCA2IDE4IDUwIDIwIDU2IDMKMiAtNyA4IC0xMCAxMiAtNiAxNCAxMyAtNCAzOCAtMjkgMzggLTEzIDAgLTI3IDYgLTI5IDEzIC00IDEwIC02IDEwIC02IDB6Ii8+CjxwYXRoIGQ9Ik0yNTgxIDY1NTMgYy0xIC03IC0xMiAtMTMgLTI2IC0xMyAtMjEgMCAtMjUgLTUgLTI0IC0yNyAxIC0xNyAzIC0yMQo2IC0xMCAyIDkgMTEgMTcgMTkgMTcgMTIgMCAxMSAtOCAtOCAtNDEgLTE5IC0zNSAtMjQgLTM4IC0yNiAtMjAgLTIgMTMgLTExCjIxIC0yNCAyMSAtMTQgMCAtMTggNSAtMTQgMTYgMyA5IDYgMjAgNiAyNSAwIDUgNyA5IDE1IDkgOCAwIDE1IDUgMTUgMTAgMCA2Ci0xMyAxMCAtMzAgMTAgLTE2IDAgLTMwIC00IC0zMCAtMTAgMCAtNSA0IC0xMCA5IC0xMCA5IDAgMyAtMzAgLTE1IC03NCAtNQotMTQgLTQgLTE3IDQgLTEyIDggNSAxMiAtNCAxMiAtMzEgMCAtMzMgMyAtMzggMjUgLTM5IDIxIC0yIDI1IDIgMjUgMjcgMCAxNgo1IDI5IDEwIDI5IDYgMCAxMCAtMTYgMTAgLTM2IDAgLTI5IDMgLTM1IDE2IC0zMCA5IDMgMzQgNyA1NyA3IDIzIDEgMzIgNCAyMAo2IC0yNiA1IC0zMSAyMyAtOCAyMyA4IDAgMTUgNSAxNSAxMCAwIDYgLTcgMTAgLTE1IDEwIC0yMSAwIC0xOSAxOCAzIDIzIDE2IDQKMTYgNSAwIDYgLTEwIDAgLTE4IDYgLTE4IDExIDAgNiA4IDEwIDE4IDExIDEzIDAgMTQgMiAyIDYgLTggNCAtMjAgMTMgLTI3IDIyCi0xMSAxNCAtMTIgMTQgLTEzIC0yIDAgLTEwIC00IC0xNiAtMTAgLTEyIC01IDMgLTcgMTIgLTMgMjAgNiAxOCA1MCAyMCA1NiAzCjIgLTcgOCAtMTAgMTIgLTYgMTQgMTMgLTQgMzggLTI5IDM4IC0xMyAwIC0yNyA2IC0yOSAxMyAtNCAxMCAtNiAxMCAtNiAweiIvPgo8cGF0aCBkPSJNNTAzIDY1NDMgYzQxIC01IDUxIC0yMyAxMiAtMjMgLTIxIDAgLTI1IC01IC0yNSAtMzAgMCAtMjYgNCAtMzAgMjYKLTMwIDM2IDAgMTkgLTIwIC0xOSAtMjEgLTMxIC0yIC0zMSAtMiAtNCAtNiAyMCAtMyAyNyAtOSAyMyAtMTkgLTMgLTkgMSAtMTQKMTQgLTE0IDExIDAgMjAgLTQgMjAgLTEwIDAgLTUgLTEwIC0xMCAtMjIgLTEwIC0yNSAwIC02MyAtMjAgLTQwIC0yMCA3IDAgMzMKNSA1NyAxMSAzMyA4IDUzIDggNzYgMCAxOCAtNiAzNCAtOSAzNyAtNiAzIDMgLTkgMTAgLTI2IDE2IC0yNyA5IC0zMCAxMyAtMTkKMjkgNiAxMSAyMyAyMSAzNyAyMyAxNCAyIC0zIDUgLTM4IDYgLTcyIDEgLTc4IDIxIC02IDIxIDQyIDAgNDQgMSA0NCAzMCAwIDI1Ci00IDMwIC0yNSAzMCAtMzkgMCAtMjkgMTggMTMgMjMgMjAgMiAtMTAgNCAtNjggNCAtNTggMCAtODggLTIgLTY3IC00eiIvPgo8cGF0aCBkPSJNMTEyNSAyOTE3IGMtMTYgLTQzIC0xOCAtNDUgLTYyIC00NSAtMjUgLTEgLTQ4IC00IC01MSAtNyAtMyAtMyA0MjkKLTQgOTU5IC0zIDUzMCAxIDg5NSA0IDgxMiA1IC04NCAyIC0xNTMgNiAtMTUzIDkgMCAyIDcgMjEgMTUgNDEgOCAyMCAxMyAzOAoxMSA0MCAtMiAyIC0xMiAtMTYgLTIxIC00MSBsLTE4IC00NiAtNzQ4IDAgYy00MTIgMCAtNzQ5IDIgLTc0OSA1IDAgMyA3IDIyCjE1IDQyIDggMjAgMTMgMzggMTEgNDAgLTIgMiAtMTIgLTE2IC0yMSAtNDB6Ii8+CjxwYXRoIGQ9Ik00MjAgMjUwMCBjMCAtNyAxNDcyIC0xMCA0Mzk1IC0xMCAyOTIzIDAgNDM5NSAzIDQzOTUgMTAgMCA3IC0xNDcyCjEwIC00Mzk1IDEwIC0yOTIzIDAgLTQzOTUgLTMgLTQzOTUgLTEweiIvPgo8cGF0aCBkPSJNNDIwIDc4MCBjMCAtNyAxNDcyIC0xMCA0Mzk1IC0xMCAyOTIzIDAgNDM5NSAzIDQzOTUgMTAgMCA3IC0xNDcyCjEwIC00Mzk1IDEwIC0yOTIzIDAgLTQzOTUgLTMgLTQzOTUgLTEweiIvPgo8L2c+Cjwvc3ZnPgo=",
			},
			wantErr: image.ErrFormat,
			wantExt: "",
		},
		{
			name: "success",
			args: args{
				base64: "data:image/png;base64,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",
			},
			wantErr: nil,
			wantExt: "png",
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			_, ext, err := ExtractFromImage(tt.args.base64)
			if tt.wantErr != nil && err == nil {
				t.Errorf("ExtractFromImage: error mismatch\ngot: %v \nwant: err", err)

				return
			}

			if tt.wantErr == nil && err != nil {
				t.Errorf("ExtractFromImage: error mismatch\ngot: %v \nwant: nil", err)

				return
			}

			if tt.wantErr != nil && err != nil && tt.wantErr.Error() != err.Error() {
				t.Errorf("ExtractFromImage: error mismatch\ngot: %v \nwant: %v", err, tt.wantErr)

				return
			}

			if tt.wantExt != ext {
				t.Errorf("ExtractFromImage: value mismatch\ngot: %v \nwant: %v", err, ext)

				return
			}
		})
	}
}
